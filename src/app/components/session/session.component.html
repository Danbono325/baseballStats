<app-navbar></app-navbar>
<!-- <h1>Hello {{ curUser.givenName }}</h1> -->
<h2>Session Pitches</h2>
<div class="container">
  <div class="row">
    <div class="pitcher-dets">
      <p>{{ currentPitcher.name }}</p>
      <p>{{ currentPitcher.throws }}</p>
      <p>{{ currentPitcher.height }}</p>
      <p>{{ currentPitcher.age }}</p>
      <button
        class="btn btn-primary"
        data-toggle="modal"
        data-target="#filterModal"
      >
        Filter Data
      </button>
      <ng-template #content let-modal>
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Session Summary</h4>
        </div>
        <div class="modal-body">
          <h5>{{ currentPitcher.name }}</h5>
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th>Pitch Type</th>
                <th>Avg Velocity</th>
                <th>Max Velocity</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>4 Seam Fastball</td>
                <td>
                  {{
                    this.sessionSummaryData["4 Seam Fastball"][0]
                      | number: "1.1-1"
                  }}
                </td>
                <td>
                  {{
                    this.sessionSummaryData["4 Seam Fastball"][1]
                      | number: "1.1-1"
                  }}
                </td>
              </tr>
              <tr>
                <td>2 Seam Fastball</td>
                <td>
                  {{
                    this.sessionSummaryData["2 Seam Fastball"][0]
                      | number: "1.1-1"
                  }}
                </td>
                <td>
                  {{
                    this.sessionSummaryData["2 Seam Fastball"][1]
                      | number: "1.1-1"
                  }}
                </td>
              </tr>
              <tr>
                <td>Changeup</td>
                <td>
                  {{ this.sessionSummaryData["Changeup"][0] | number: "1.1-1" }}
                </td>
                <td>
                  {{ this.sessionSummaryData["Changeup"][1] | number: "1.1-1" }}
                </td>
              </tr>
              <tr>
                <td>Slider</td>
                <td>
                  {{ this.sessionSummaryData["Slider"][0] | number: "1.1-1" }}
                </td>
                <td>
                  {{ this.sessionSummaryData["Slider"][1] | number: "1.1-1" }}
                </td>
              </tr>
              <tr>
                <td>Curveball</td>
                <td>
                  {{
                    this.sessionSummaryData["Curveball"][0] | number: "1.1-1"
                  }}
                </td>
                <td>
                  {{
                    this.sessionSummaryData["Curveball"][1] | number: "1.1-1"
                  }}
                </td>
              </tr>
              <tr>
                <td>Cut Fastball</td>
                <td>
                  {{
                    this.sessionSummaryData["Cut Fastball"][0] | number: "1.1-1"
                  }}
                </td>
                <td>
                  {{
                    this.sessionSummaryData["Cut Fastball"][1] | number: "1.1-1"
                  }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-outline-dark"
            (click)="modal.dismiss('Cross click')"
          >
            Close
          </button>
        </div>
      </ng-template>

      <button class="btn btn-primary" (click)="open(content)">
        Session Summary
      </button>
    </div>
    <!-- <div class="col-md-3">
      <div class="pitcher-dets">
        <p>Summary</p>
      </div>
    </div> -->
  </div>
  <div class="row ">
    <div class="table-responsive">
      <table class="table">
        <thead class="thead-dark">
          <tr>
            <th>Pitch Type</th>
            <th>R. Side</th>
            <th>R. Height</th>
            <th>H. Break</th>
            <th>V. Break</th>
            <th>Spin</th>
            <th>True Spin</th>
            <th>SZX</th>
            <th>SZY</th>
            <th>Speed</th>
            <th>Spin Conf.</th>
            <th>Spin Eff.</th>
            <th>Launch Angle</th>
            <th>H. Angle</th>
            <th>Rifle Spin</th>
            <th>Gyro</th>
          </tr>
        </thead>
        <tbody *ngIf="!isFiltered">
          <tr *ngFor="let data of sessionData">
            <td>{{ data["Pitch_Type_pitchType"] | pitchType }}</td>
            <td>{{ data["releaseSide"] | number: "1.1-1" }}</td>
            <td>{{ data["releaseHeight"] | number: "1.1-1" }}</td>
            <td>{{ data["horizontalBreak"] | number: "1.1-1" }}</td>
            <td>{{ data["verticalBreak"] | number: "1.1-1" }}</td>
            <td>{{ data["spin"] | number: "1.1-1" }}</td>
            <td>{{ data["trueSpin"] | number: "1.1-1" }}</td>
            <td>{{ data["szx"] | number: "1.1-1" }}</td>
            <td>{{ data["szy"] | number: "1.1-1" }}</td>
            <td>{{ data["speed"] | number: "1.1-1" }}</td>
            <td>{{ data["spinConfidence"] | number: "1.1-1" }}</td>
            <td>{{ data["spinEfficiency"] | number: "1.1-1" }}</td>
            <td>{{ data["launchAngle"] | number: "1.1-1" }}</td>
            <td>{{ data["rifleSpin"] | number: "1.1-1" }}</td>
            <td>{{ data["horizontalAngle"] | number: "1.1-1" }}</td>
            <td>{{ data["gyroDegree"] | number: "1.1-1" }}</td>
          </tr>
        </tbody>

        <tbody *ngIf="isFiltered">
          <tr *ngFor="let data of filteredSessionData">
            <td>{{ data["Pitch_Type_pitchType"] | pitchType }}</td>
            <td>{{ data["releaseSide"] | number: "1.1-1" }}</td>
            <td>{{ data["releaseHeight"] | number: "1.1-1" }}</td>
            <td>{{ data["horizontalBreak"] | number: "1.1-1" }}</td>
            <td>{{ data["verticalBreak"] | number: "1.1-1" }}</td>
            <td>{{ data["spin"] | number: "1.1-1" }}</td>
            <td>{{ data["trueSpin"] | number: "1.1-1" }}</td>
            <td>{{ data["szx"] | number: "1.1-1" }}</td>
            <td>{{ data["szy"] | number: "1.1-1" }}</td>
            <td>{{ data["speed"] | number: "1.1-1" }}</td>
            <td>{{ data["spinConfidence"] | number: "1.1-1" }}</td>
            <td>{{ data["spinEfficiency"] | number: "1.1-1" }}</td>
            <td>{{ data["launchAngle"] | number: "1.1-1" }}</td>
            <td>{{ data["rifleSpin"] | number: "1.1-1" }}</td>
            <td>{{ data["horizontalAngle"] | number: "1.1-1" }}</td>
            <td>{{ data["gyroDegree"] | number: "1.1-1" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div *ngIf="!isFiltered">
  <app-charts></app-charts>
</div>

<div
  class="modal fade"
  id="filterModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="filterModal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Filter Pitches</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <div class="pitch-types" id="pitch-type">
          <div>
            <input
              type="checkbox"
              id="4FB"
              (change)="pitchTypeCheckboxes[0] = !pitchTypeCheckboxes[0]"
            />
            <label for="4FB">4 Seam Fastball</label>
          </div>
          <div>
            <input
              type="checkbox"
              id="2FB"
              (change)="pitchTypeCheckboxes[5] = !pitchTypeCheckboxes[5]"
            />
            <label for="2FB">2 Seam Fastball</label>
          </div>
          <div>
            <input
              type="checkbox"
              id="CB"
              (change)="pitchTypeCheckboxes[3] = !pitchTypeCheckboxes[3]"
            />
            <label for="CB">Curveball</label>
          </div>

          <div>
            <input
              type="checkbox"
              id="SL"
              (change)="pitchTypeCheckboxes[4] = !pitchTypeCheckboxes[4]"
            />
            <label for="SL">Slider</label>
          </div>

          <div>
            <input
              type="checkbox"
              id="Cut"
              (change)="pitchTypeCheckboxes[1] = !pitchTypeCheckboxes[1]"
            />
            <label for="Cut">Cut Fastball</label>
          </div>
          <div style="margin-bottom: 1vh;">
            <input
              type="checkbox"
              id="CH"
              (change)="pitchTypeCheckboxes[6] = !pitchTypeCheckboxes[6]"
            />
            <label for="CH">Changeup</label>
          </div>
        </div>
        <div class="custom-slider">
          <p>Velocity</p>
          <ng5-slider [(value)]="value" [(highValue)]="highValue" [options]="options"></ng5-slider>
        </div>
        <div class="custom-slider">
          <p>Spin Efficiency</p>
          <ng5-slider [(value)]="value" [(highValue)]="highValue" [options]="options"></ng5-slider>
        </div>
        <div class="custom-slider">
          <p>Vertical Break</p>
          <ng5-slider [(value)]="value" [(highValue)]="highValue" [options]="options"></ng5-slider>
        </div>
        <div class="custom-slider">
          <p>Horizontal Break</p>
          <ng5-slider [(value)]="value" [(highValue)]="highValue" [options]="options"></ng5-slider>
        </div>
        <div class="custom-slider">
          <p>Relase Height</p>
          <ng5-slider [(value)]="value" [(highValue)]="highValue" [options]="options"></ng5-slider>
        </div>
        <div class="custom-slider">
          <p>Relase Side</p>
          <ng5-slider [(value)]="value" [(highValue)]="highValue" [options]="options"></ng5-slider>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary"
          data-dismiss="modal"
          (click)="filterItems()"
        >
          Filter
        </button>
      </div>
    </div>
  </div>
</div>
